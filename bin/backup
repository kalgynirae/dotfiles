#!/bin/bash

source ~/.config/backup-params

paths=(
    ~/blender
    ~/documents
    ~/flstudio
    ~/music
    ~/pictures
    ~/recordings
    ~/scores
    ~/sheets
    ~/videos
)

common_args=(
    --limit-download 1024
    --limit-upload 400
    --option b2.connections=4
    --password-file ~/.config/backup-password
)

if (($# == 0)); then
    args=(
        backup
        "${paths[@]}"
    )
else
    args=("$@")
fi

set -x
exec restic "${common_args[@]}" "${args[@]}"

#!/bin/bash

source ~/.config/backup-params

paths=(
    ~/blender
    ~/code
    ~/documents
    ~/flstudio
    ~/games
    ~/lumeh.org-files-backup
    ~/misc
    ~/music
    ~/pictures
    ~/recordings
    ~/school
    ~/scores
    ~/sheets
    ~/sounds
    ~/stepmania
    ~/videos
)

common_args=(
    --limit-download 1024
    --limit-upload 500
    --option b2.connections=4
    --password-file ~/.config/backup-password
)

if (($# == 0)); then
    args=(
        backup
        "${paths[@]}"
    )
else
    args=("$@")
fi

set -x
exec restic "${common_args[@]}" "${args[@]}"

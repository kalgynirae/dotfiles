#!/bin/bash

ACTIONS=(poweroff reboot reboot-to-windows suspend)
ACTION=$(printf '%s\n' "${ACTIONS[@]}" | fuzzel --dmenu)

if [[ $ACTION == reboot-to-windows ]]; then
  echo >&2 ">> reboot-to-windows"
  reboot-to-windows
elif [[ $ACTION == suspend ]]; then
  echo >&2 ">> sleep-repeatedly"
  sleep-repeatedly
elif [[ -n $ACTION ]]; then
  echo >&2 ">> systemctl ${ACTION@Q}"
  systemctl --quiet --no-block "$ACTION"
fi
